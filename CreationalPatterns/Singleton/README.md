# Singleton Design Pattern

## [Implementation](./Implementation/Singleton.cs) And [How To Use](./UseSingleton.cs)

`GOF:`

**مطمعن میشود تنها یک نسخه از کلاس وجود دارد،و یک نقطه دسترسی به صورت عمومی اراعه میدهد**


`Concept:`

فرض کنید کلاسی به نام الف دارید و باید یک نسخه از آن بسازید.

معمولا کاری که انجام میدین چیزی شبیه به کد زیر هست:

```csharp
var myA = new A();
```

حالا تصور کنید ده بار به این کلاس نیاز دارید

ده بار از این کلاس نسخه ساختید

چه اتفاقی میوفتد ؟

در دنیای واقعی کاری مثل این یک فاجعه به حساب میاید

مخصوصا وقتی کانستراکتورِ کلاسی که دارید هزینه بر است.

سینگلتون پترن مطعمن میشود شما تنها یک ، فقط یک نسخه از کلاس میسازید
و همه جا ازش استفاده میکنید.



# FAQ

**> Multi-Threading**

توجه کنین ممکن هست بعضی جاها برای ساخت اینستنس از

`lock`

استفاده کنید

[مثال](./Implementation/MultiThreadSingleton.cs)
##

**> استفاده کردم ؟ volatile  چرا از**

معمولا پردازش های مولتی ترد گاها با ارور های بیخود و مزخرف مواجه میشن

استفاده از این کلید واژه ممکنه درصد این مشکلات رو کمتر کنه

*a wise man once said: you should see the compiler as the enemy!*

##

**> چرا ساخت چند اینستنس از یک کلاس مسعله مهمیه؟**

همونطور که میدونید ابجکت هایی که میسازیم در قسمت گرون قسمت مموری ساخته میشن

(heap)

این مسعله در زبان هایی که از گاربج کالکتور استفاده میکنن خیلی مهمه.
چون هر زمان که اشغال جمع کنِ عزیزمون شروع به کار میکنه برنامه ما متوقف میشه و هیچ کاری انجام نمیده

خب حالا اگه کلی اشغال داشته باشید چه اتفاقی میوفته؟ برنامه برای مدت طولانی متوقف میشه و این اتفاق زیاد خوشایند نیست.


##

**> چه زمانی از این پترن استفاده کنیم؟**

برخی کاربرد ها :
- سیستم های متمرکز
- نگه داری و حفظ منابع به خصوص مثل فایل های لاگ
- پیاده سازی سیستم هایی مثل کش


##

**> Nested Classes**

در مواقع اینچنینی همیشه میتونید کلاس اصلی رو به صورت 

`sealed`

در بیارید تا بروز مشکلات ارث بری جلوگیری کنید